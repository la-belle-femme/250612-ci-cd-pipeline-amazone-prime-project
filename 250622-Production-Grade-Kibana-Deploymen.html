<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production-Grade Kibana Deployment Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .project-info {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .project-info h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .info-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-card strong {
            color: #2c3e50;
        }

        .phase {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            margin-bottom: 25px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .phase:hover {
            transform: translateY(-5px);
        }

        .phase-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: between;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .phase-number {
            background: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .phase-content {
            padding: 25px;
            display: none;
        }

        .phase.active .phase-content {
            display: block;
        }

        .step {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
            transition: all 0.3s ease;
        }

        .step:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .step h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-block::before {
            content: 'Copy';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a5568;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .code-block:hover::before {
            background: #667eea;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #f1c40f;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
        }

        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .checkbox-container input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .diagram {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .architecture-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .arch-component {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            min-width: 120px;
            text-align: center;
            position: relative;
        }

        .arch-component::after {
            content: '‚Üí';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #667eea;
        }

        .arch-component:last-child::after {
            display: none;
        }

        .toggle-btn {
            background: none;
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-left: auto;
            padding: 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .architecture-flow {
                flex-direction: column;
            }
            
            .arch-component::after {
                content: '‚Üì';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Production-Grade Kibana Deployment</h1>
            <p><strong>Ticket #269</strong> - Complete ELK Stack Deployment on AWS EKS</p>
            <p>DevOps Engineer Guide | 20+ Years Experience</p>
        </div>

        <div class="project-info">
            <h2>üìã Project Overview</h2>
            <div class="info-grid">
                <div class="info-card">
                    <strong>Cluster:</strong> amazon-prime-eks<br>
                    <strong>EKS Version:</strong> 1.28<br>
                    <strong>Nodes:</strong> 2 x t3.medium
                </div>
                <div class="info-card">
                    <strong>Team Size:</strong> 10 users<br>
                    <strong>Load Balancer:</strong> AWS ALB<br>
                    <strong>TLS:</strong> cert-manager + ACM
                </div>
                <div class="info-card">
                    <strong>Config Management:</strong> Helm<br>
                    <strong>Monitoring:</strong> Prometheus/Grafana<br>
                    <strong>CI/CD:</strong> Jenkins (Phase 2)
                </div>
                <div class="info-card">
                    <strong>Repository:</strong><br>
                    <a href="https://github.com/la-belle-femme/250612-ci-cd-pipeline-amazone-prime-project.git" target="_blank">GitHub Repo</a>
                </div>
            </div>
        </div>

        <div class="diagram">
            <h3>üèóÔ∏è Architecture Overview</h3>
            <div class="architecture-flow">
                <div class="arch-component">Internet</div>
                <div class="arch-component">ALB</div>
                <div class="arch-component">EKS Cluster</div>
                <div class="arch-component">ELK Stack</div>
                <div class="arch-component">Monitoring</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 15%;"></div>
        </div>
        <p style="text-align: center; color: white; font-weight: bold;">Overall Progress: <span id="progressText">15%</span> - Prerequisites Complete! üöÄ</p>

        <!-- Phase 1: Prerequisites and Setup -->
        <div class="phase active">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">1</div>
                <span>Prerequisites and Environment Setup</span>
                <span class="toggle-btn">‚àí</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>1.1 Verify EKS Cluster Connection</h4>
                    <p>First, let's ensure your EKS cluster is accessible and properly configured.</p>
                    <div class="code-block">
# Update kubeconfig
aws eks update-kubeconfig --region us-east-1 --name amazon-prime-eks

# Verify cluster connection
kubectl get nodes
kubectl get namespaces

# Check cluster info
kubectl cluster-info</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step1-1" onchange="updateProgress()">
                        <label for="step1-1">‚úÖ EKS cluster connection verified</label>
                    </div>
                </div>

                <div class="step">
                    <h4>1.2 Install Required Tools ‚úÖ COMPLETED</h4>
                    <p><strong>Status:</strong> All tools verified and Helm repositories added successfully!</p>
                    <div class="success">
                        <strong>‚úÖ Completed Steps:</strong><br>
                        ‚Ä¢ elastic repo: Already configured<br>
                        ‚Ä¢ jetstack repo: Already configured<br>
                        ‚Ä¢ prometheus-community repo: ‚úÖ Added<br>
                        ‚Ä¢ eks repo: ‚úÖ Added<br>
                        ‚Ä¢ All repositories updated successfully
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step1-2" checked onchange="updateProgress()">
                        <label for="step1-2">‚úÖ All required tools installed and configured</label>
                    </div>
                </div>

                <div class="step">
                    <h4>1.3 Create Namespaces ‚úÖ COMPLETED</h4>
                    <p><strong>Status:</strong> All namespaces created successfully in your EKS cluster!</p>
                    <div class="success">
                        <strong>‚úÖ Created Namespaces:</strong><br>
                        ‚Ä¢ elk-stack: ‚úÖ Active (33s ago)<br>
                        ‚Ä¢ monitoring: ‚úÖ Active (23s ago)<br>
                        ‚Ä¢ cert-manager: ‚úÖ Active (15s ago)<br>
                        ‚Ä¢ Total cluster uptime: 161 minutes
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step1-3" checked onchange="updateProgress()">
                        <label for="step1-3">‚úÖ Namespaces created successfully</label>
                    </div>
                </div>

                <div class="info">
                    <strong>üí° Pro Tip:</strong> Using separate namespaces helps with resource isolation, security, and easier management in production environments.
                </div>
            </div>
        </div>

        <!-- Phase 2: SSL Certificate Setup -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">2</div>
                <span>SSL Certificate and cert-manager Setup</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>2.1 Install cert-manager</h4>
                    <p>Deploy cert-manager for automatic SSL certificate management.</p>
                    <div class="code-block">
# Install cert-manager
helm install cert-manager jetstack/cert-manager \
  --namespace cert-manager \
  --set installCRDs=true \
  --set prometheus.enabled=false

# Wait for cert-manager to be ready
kubectl wait --for=condition=ready pod -l app.kubernetes.io/instance=cert-manager -n cert-manager --timeout=300s

# Verify installation
kubectl get pods -n cert-manager</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step2-1" onchange="updateProgress()">
                        <label for="step2-1">‚úÖ cert-manager installed successfully</label>
                    </div>
                </div>

                <div class="step">
                    <h4>2.2 Create ACM Certificate</h4>
                    <p>Create an ACM certificate for your domain.</p>
                    <div class="warning">
                        <strong>‚ö†Ô∏è Important:</strong> Replace 'your-domain.com' with your actual domain name.
                    </div>
                    <div class="code-block">
# Create ACM certificate (replace with your domain)
aws acm request-certificate \
  --domain-name kibana.your-domain.com \
  --subject-alternative-names "*.your-domain.com" \
  --validation-method DNS \
  --region us-east-1

# List certificates to get the ARN
aws acm list-certificates --region us-east-1

# Note the certificate ARN for later use</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step2-2" onchange="updateProgress()">
                        <label for="step2-2">‚úÖ ACM certificate requested and validated</label>
                    </div>
                </div>

                <div class="step">
                    <h4>2.3 Configure ClusterIssuer</h4>
                    <p>Create a ClusterIssuer for Let's Encrypt certificates as backup.</p>
                    <div class="code-block">
cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: your-email@domain.com  # Replace with your email
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: alb
EOF</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step2-3" onchange="updateProgress()">
                        <label for="step2-3">‚úÖ ClusterIssuer configured</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 3: ALB Ingress Controller -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">3</div>
                <span>ALB Ingress Controller Setup</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>3.1 Create IAM Service Account</h4>
                    <p>Create IAM service account for ALB Ingress Controller.</p>
                    <div class="code-block">
# Download IAM policy
curl -o iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.7.2/docs/install/iam_policy.json

# Create IAM policy
aws iam create-policy \
    --policy-name AWSLoadBalancerControllerIAMPolicy \
    --policy-document file://iam_policy.json

# Create service account with IAM role
eksctl create iamserviceaccount \
  --cluster=amazon-prime-eks \
  --namespace=kube-system \
  --name=aws-load-balancer-controller \
  --role-name AmazonEKSLoadBalancerControllerRole \
  --attach-policy-arn=arn:aws:iam::$(aws sts get-caller-identity --query Account --output text):policy/AWSLoadBalancerControllerIAMPolicy \
  --approve</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step3-1" onchange="updateProgress()">
                        <label for="step3-1">‚úÖ IAM service account created</label>
                    </div>
                </div>

                <div class="step">
                    <h4>3.2 Install ALB Ingress Controller</h4>
                    <p>Deploy the AWS Load Balancer Controller using Helm.</p>
                    <div class="code-block">
# Add AWS Load Balancer Controller Helm repository
helm repo add eks https://aws.github.io/eks-charts
helm repo update

# Install AWS Load Balancer Controller
helm install aws-load-balancer-controller eks/aws-load-balancer-controller \
  -n kube-system \
  --set clusterName=amazon-prime-eks \
  --set serviceAccount.create=false \
  --set serviceAccount.name=aws-load-balancer-controller

# Verify installation
kubectl get deployment -n kube-system aws-load-balancer-controller</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step3-2" onchange="updateProgress()">
                        <label for="step3-2">‚úÖ ALB Ingress Controller installed</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 4: ELK Stack Deployment -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">4</div>
                <span>ELK Stack Deployment</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>4.1 Deploy Elasticsearch</h4>
                    <p>Deploy Elasticsearch cluster optimized for your team size.</p>
                    <div class="code-block">
# Create Elasticsearch values file
cat &lt;&lt;EOF > elasticsearch-values.yaml
replicas: 2
minimumMasterNodes: 1

esConfig:
  elasticsearch.yml: |
    cluster.name: "amazon-prime-logs"
    network.host: 0.0.0.0
    discovery.zen.minimum_master_nodes: 1
    discovery.type: single-node

resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

volumeClaimTemplate:
  accessModes: [ "ReadWriteOnce" ]
  storageClassName: "gp2"
  resources:
    requests:
      storage: 10Gi

service:
  type: ClusterIP
  ports:
    - name: http
      protocol: TCP
      port: 9200
    - name: transport
      protocol: TCP
      port: 9300
EOF

# Install Elasticsearch
helm install elasticsearch elastic/elasticsearch \
  --namespace elk-stack \
  --values elasticsearch-values.yaml

# Wait for Elasticsearch to be ready
kubectl wait --for=condition=ready pod -l app=elasticsearch-master -n elk-stack --timeout=600s</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step4-1" onchange="updateProgress()">
                        <label for="step4-1">‚úÖ Elasticsearch deployed successfully</label>
                    </div>
                </div>

                <div class="step">
                    <h4>4.2 Deploy Kibana</h4>
                    <p>Deploy Kibana with proper security and resource allocation.</p>
                    <div class="code-block">
# Create Kibana values file
cat &lt;&lt;EOF > kibana-values.yaml
replicas: 2

kibanaConfig:
  kibana.yml: |
    server.host: 0.0.0.0
    elasticsearch.hosts: ["http://elasticsearch-master:9200"]
    server.basePath: ""
    server.rewriteBasePath: false

resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

service:
  type: ClusterIP
  port: 5601

healthCheckPath: "/api/status"
EOF

# Install Kibana
helm install kibana elastic/kibana \
  --namespace elk-stack \
  --values kibana-values.yaml

# Wait for Kibana to be ready
kubectl wait --for=condition=ready pod -l app=kibana -n elk-stack --timeout=300s</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step4-2" onchange="updateProgress()">
                        <label for="step4-2">‚úÖ Kibana deployed successfully</label>
                    </div>
                </div>

                <div class="step">
                    <h4>4.3 Deploy Logstash (Optional)</h4>
                    <p>Deploy Logstash for log processing and transformation.</p>
                    <div class="code-block">
# Create Logstash values file
cat &lt;&lt;EOF > logstash-values.yaml
replicas: 1

logstashConfig:
  logstash.yml: |
    http.host: 0.0.0.0
    path.config: /usr/share/logstash/pipeline

logstashPipeline:
  logstash.conf: |
    input {
      beats {
        port => 5044
      }
    }
    output {
      elasticsearch {
        hosts => ["http://elasticsearch-master:9200"]
        index => "logstash-%{+YYYY.MM.dd}"
      }
    }

resources:
  requests:
    cpu: "250m"
    memory: "512Mi"
  limits:
    cpu: "500m"
    memory: "1Gi"

service:
  type: ClusterIP
  ports:
    - name: beats
      port: 5044
      protocol: TCP
      targetPort: 5044
EOF

# Install Logstash
helm install logstash elastic/logstash \
  --namespace elk-stack \
  --values logstash-values.yaml</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step4-3" onchange="updateProgress()">
                        <label for="step4-3">‚úÖ Logstash deployed (if needed)</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 5: Ingress Configuration -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">5</div>
                <span>Ingress and Load Balancer Configuration</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>5.1 Create Kibana Ingress</h4>
                    <p>Configure ALB Ingress for Kibana with SSL termination.</p>
                    <div class="warning">
                        <strong>‚ö†Ô∏è Important:</strong> Replace the certificate ARN and domain name with your actual values.
                    </div>
                    <div class="code-block">
cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: kibana-ingress
  namespace: elk-stack
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: '443'
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:YOUR_ACCOUNT:certificate/YOUR_CERT_ID
    alb.ingress.kubernetes.io/healthcheck-path: /api/status
    alb.ingress.kubernetes.io/healthcheck-protocol: HTTP
    alb.ingress.kubernetes.io/success-codes: '200'
spec:
  rules:
  - host: kibana.your-domain.com  # Replace with your domain
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: kibana-kibana
            port:
              number: 5601
EOF</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step5-1" onchange="updateProgress()">
                        <label for="step5-1">‚úÖ Kibana Ingress configured with SSL</label>
                    </div>
                </div>

                <div class="step">
                    <h4>5.2 Verify Load Balancer</h4>
                    <p>Check that the ALB has been created and is functioning.</p>
                    <div class="code-block">
# Check ingress status
kubectl get ingress -n elk-stack

# Get ALB DNS name
kubectl get ingress kibana-ingress -n elk-stack -o jsonpath='{.status.loadBalancer.ingress[0].hostname}'

# Check ALB in AWS Console or CLI
aws elbv2 describe-load-balancers --region us-east-1

# Test connectivity (replace with your domain)
curl -I https://kibana.your-domain.com</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step5-2" onchange="updateProgress()">
                        <label for="step5-2">‚úÖ Load balancer verified and accessible</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 6: Monitoring Setup -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">6</div>
                <span>Prometheus and Grafana Monitoring</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>6.1 Install Prometheus Stack</h4>
                    <p>Deploy Prometheus and Grafana for comprehensive monitoring.</p>
                    <div class="code-block">
# Create monitoring values file
cat &lt;&lt;EOF > monitoring-values.yaml
prometheus:
  prometheusSpec:
    retention: 15d
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: gp2
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 20Gi

grafana:
  adminPassword: "admin123!"  # Change this password
  persistence:
    enabled: true
    storageClassName: gp2
    size: 10Gi
  
  service:
    type: ClusterIP
    port: 80

alertmanager:
  alertmanagerSpec:
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: gp2
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 5Gi
EOF

# Install Prometheus stack
helm install prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --values monitoring-values.yaml

# Wait for deployment
kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=grafana -n monitoring --timeout=300s</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step6-1" onchange="updateProgress()">
                        <label for="step6-1">‚úÖ Prometheus and Grafana installed</label>
                    </div>
                </div>

                <div class="step">
                    <h4>6.2 Configure Grafana Ingress</h4>
                    <p>Create Ingress for Grafana dashboard access.</p>
                    <div class="code-block">
cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: grafana-ingress
  namespace: monitoring
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: '443'
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:YOUR_ACCOUNT:certificate/YOUR_CERT_ID
spec:
  rules:
  - host: grafana.your-domain.com  # Replace with your domain
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: prometheus-grafana
            port:
              number: 80
EOF</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step6-2" onchange="updateProgress()">
                        <label for="step6-2">‚úÖ Grafana Ingress configured</label>
                    </div>
                </div>

                <div class="step">
                    <h4>6.3 Import ELK Dashboards</h4>
                    <p>Import pre-built dashboards for ELK stack monitoring.</p>
                    <div class="info">
                        <strong>üìä Recommended Grafana Dashboards:</strong><br>
                        ‚Ä¢ Elasticsearch Dashboard ID: 266<br>
                        ‚Ä¢ Kibana Dashboard ID: 7569<br>
                        ‚Ä¢ Kubernetes Cluster Monitoring ID: 315
                    </div>
                    <div class="success">
                        <strong>‚úÖ Access Information:</strong><br>
                        ‚Ä¢ Grafana: https://grafana.your-domain.com (admin/admin123!)<br>
                        ‚Ä¢ Kibana: https://kibana.your-domain.com<br>
                        ‚Ä¢ Prometheus: kubectl port-forward svc/prometheus-kube-prometheus-prometheus 9090:9090 -n monitoring
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step6-3" onchange="updateProgress()">
                        <label for="step6-3">‚úÖ Monitoring dashboards configured</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 7: Security and Optimization -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">7</div>
                <span>Security Hardening and Optimization</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>7.1 Configure Network Policies</h4>
                    <p>Implement network policies for enhanced security.</p>
                    <div class="code-block">
# Create network policy for ELK stack
cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: elk-network-policy
  namespace: elk-stack
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: elk-stack
    - namespaceSelector:
        matchLabels:
          name: kube-system
  - ports:
    - protocol: TCP
      port: 9200
    - protocol: TCP
      port: 5601
    - protocol: TCP
      port: 5044
  egress:
  - {}
EOF</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step7-1" onchange="updateProgress()">
                        <label for="step7-1">‚úÖ Network policies configured</label>
                    </div>
                </div>

                <div class="step">
                    <h4>7.2 Configure Resource Quotas</h4>
                    <p>Set resource quotas to prevent resource exhaustion.</p>
                    <div class="code-block">
# Create resource quota for ELK namespace
cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: v1
kind: ResourceQuota
metadata:
  name: elk-resource-quota
  namespace: elk-stack
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "10"
    pods: "20"
EOF</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step7-2" onchange="updateProgress()">
                        <label for="step7-2">‚úÖ Resource quotas configured</label>
                    </div>
                </div>

                <div class="step">
                    <h4>7.3 Setup Backup Strategy</h4>
                    <p>Configure automated backups for Elasticsearch data.</p>
                    <div class="code-block">
# Create S3 bucket for backups
aws s3 mb s3://amazon-prime-elk-backups-$(date +%s) --region us-east-1

# Configure Elasticsearch snapshot repository
kubectl exec -it elasticsearch-master-0 -n elk-stack -- curl -X PUT "localhost:9200/_snapshot/s3-backup" -H 'Content-Type: application/json' -d'
{
  "type": "s3",
  "settings": {
    "bucket": "your-backup-bucket-name",
    "region": "us-east-1",
    "base_path": "elasticsearch-snapshots"
  }
}'</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step7-3" onchange="updateProgress()">
                        <label for="step7-3">‚úÖ Backup strategy configured</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 8: Testing and Validation -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">8</div>
                <span>Testing and Validation</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>8.1 Functionality Testing</h4>
                    <p>Test all components to ensure proper functionality.</p>
                    <div class="code-block">
# Test Elasticsearch
kubectl exec -it elasticsearch-master-0 -n elk-stack -- curl -X GET "localhost:9200/_cluster/health?pretty"

# Test Kibana
curl -I https://kibana.your-domain.com

# Test ingress connectivity
kubectl get ingress -A

# Check all pods status
kubectl get pods -n elk-stack
kubectl get pods -n monitoring</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step8-1" onchange="updateProgress()">
                        <label for="step8-1">‚úÖ All components tested successfully</label>
                    </div>
                </div>

                <div class="step">
                    <h4>8.2 Performance Testing</h4>
                    <p>Conduct basic performance testing for your team size.</p>
                    <div class="code-block">
# Index sample data for testing
kubectl exec -it elasticsearch-master-0 -n elk-stack -- curl -X POST "localhost:9200/test-index/_doc" -H 'Content-Type: application/json' -d'
{
  "timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)'",
  "message": "Test log message",
  "level": "INFO",
  "application": "amazon-prime-app"
}'

# Query the data
kubectl exec -it elasticsearch-master-0 -n elk-stack -- curl -X GET "localhost:9200/test-index/_search?pretty"</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step8-2" onchange="updateProgress()">
                        <label for="step8-2">‚úÖ Performance testing completed</label>
                    </div>
                </div>

                <div class="step">
                    <h4>8.3 Security Validation</h4>
                    <p>Validate security configurations and access controls.</p>
                    <div class="code-block">
# Test HTTPS redirect
curl -I http://kibana.your-domain.com

# Verify certificate
openssl s_client -connect kibana.your-domain.com:443 -servername kibana.your-domain.com

# Check network policies
kubectl describe networkpolicy elk-network-policy -n elk-stack</div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step8-3" onchange="updateProgress()">
                        <label for="step8-3">‚úÖ Security validation passed</label>
                    </div>
                </div>

                <div class="success">
                    <strong>üéâ Congratulations!</strong> Your production-grade ELK stack is now deployed and ready for your team of 10 users. 
                    <br><br>
                    <strong>Next Steps:</strong>
                    <br>‚Ä¢ Configure log forwarding from your applications
                    <br>‚Ä¢ Set up alerting rules in Grafana
                    <br>‚Ä¢ Train your team on Kibana usage
                    <br>‚Ä¢ Implement automated deployment with Jenkins (Phase 2)
                </div>
            </div>
        </div>

        <!-- Phase 9: Documentation and Handover -->
        <div class="phase">
            <div class="phase-header" onclick="togglePhase(this)">
                <div class="phase-number">9</div>
                <span>Documentation and Next Steps</span>
                <span class="toggle-btn">+</span>
            </div>
            <div class="phase-content">
                <div class="step">
                    <h4>9.1 Access Information</h4>
                    <div class="info">
                        <strong>üîó Service URLs:</strong><br>
                        ‚Ä¢ Kibana: https://kibana.your-domain.com<br>
                        ‚Ä¢ Grafana: https://grafana.your-domain.com (admin/admin123!)<br>
                        ‚Ä¢ Prometheus: kubectl port-forward svc/prometheus-kube-prometheus-prometheus 9090:9090 -n monitoring
                    </div>
                </div>

                <div class="step">
                    <h4>9.2 Maintenance Commands</h4>
                    <div class="code-block">
# Check cluster status
kubectl get pods -A

# Scale Kibana replicas
kubectl scale deployment kibana-kibana --replicas=3 -n elk-stack

# View logs
kubectl logs -l app=kibana -n elk-stack --tail=100

# Update Helm charts
helm repo update
helm upgrade kibana elastic/kibana -n elk-stack --values kibana-values.yaml</div>
                </div>

                <div class="step">
                    <h4>9.3 Jenkins Integration (Phase 2)</h4>
                    <p>Ready for CI/CD integration with your Jenkins server.</p>
                    <div class="info">
                        <strong>üìã Jenkins Integration Checklist:</strong><br>
                        ‚Ä¢ Install Kubernetes plugin in Jenkins<br>
                        ‚Ä¢ Configure kubectl in Jenkins<br>
                        ‚Ä¢ Create deployment pipeline<br>
                        ‚Ä¢ Set up automated testing<br>
                        ‚Ä¢ Configure rollback procedures
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="step9-3" onchange="updateProgress()">
                        <label for="step9-3">‚úÖ Ready for Jenkins integration</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function togglePhase(header) {
            const phase = header.parentElement;
            const toggleBtn = header.querySelector('.toggle-btn');
            
            phase.classList.toggle('active');
            toggleBtn.textContent = phase.classList.contains('active') ? '‚àí' : '+';
        }

        function updateProgress() {
            const totalSteps = document.querySelectorAll('input[type="checkbox"]').length;
            const completedSteps = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const percentage = Math.round((completedSteps / totalSteps) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '%';
        }

        // Copy code block functionality
        document.querySelectorAll('.code-block').forEach(block => {
            block.addEventListener('click', function(e) {
                if (e.target === this || e.target.tagName === 'CODE') {
                    const text = this.textContent;
                    navigator.clipboard.writeText(text).then(() => {
                        const originalBefore = window.getComputedStyle(this, '::before').content;
                        this.style.setProperty('--copy-text', '"Copied!"');
                        setTimeout(() => {
                            this.style.setProperty('--copy-text', '"Copy"');
                        }, 2000);
                    });
                }
            });
        });

        // Initialize progress
        updateProgress();

        // Auto-expand first phase
        document.querySelector('.phase').classList.add('active');
    </script>
</body>
</html>